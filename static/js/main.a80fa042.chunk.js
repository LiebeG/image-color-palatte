(window["webpackJsonpimage-color-palette"]=window["webpackJsonpimage-color-palette"]||[]).push([[0],{27:function(e,t,n){var r=n(44),a=n(45),o=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};o.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var i=function(){};i.prototype.getColor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=this.getPaletteByImg(e,5,t);if(n){var r=n[0];return r}console.log("palette is empty, please check your image")},i.prototype.getSwatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={time:0},r=performance.now(),a=this.getPalette(e,10,t),o=performance.now();if(a)return n.time=o-r,{mc:a[0],palette:a.slice(1),info:n};console.log("palette is empty, please check your image")},i.prototype.getPalette=function(e,t,n){var o=a.validateOptions({colorCount:t,quality:n}),i=e.width*e.height,l=a.createPixelArray(e.data,i,o.quality),c=r(l,o.colorCount);return c?c.palette():null},i.prototype.getPaletteByImg=function(e,t,n){var i=a.validateOptions({colorCount:t,quality:n}),l=new o(e),c=l.getImageData(),s=l.width*l.height,u=a.createPixelArray(c.data,s,i.quality),h=r(u,i.colorCount);return h?h.palette():null},i.prototype.getColorFromUrl=function(e,t,n){var r=this,a=document.createElement("img");a.addEventListener("load",(function(){var o=r.getPalette(a,5,n)[0];t(o,e)})),a.src=e},i.prototype.getImageData=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(200===this.status){for(var e=new Uint8Array(this.response),n=e.length,r=new Array(n),a=0;a<e.length;a++)r[a]=String.fromCharCode(e[a]);var o=r.join(""),i=window.btoa(o);t("data:image/png;base64,"+i)}},n.send()},i.prototype.getColorAsync=function(e,t,n){var r=this;this.getImageData(e,(function(e){var a=document.createElement("img");a.addEventListener("load",(function(){var e=r.getPalette(a,5,n)[0];t(e,this)})),a.src=e}))},e.exports=i},31:function(e,t,n){e.exports=n(46)},36:function(e,t,n){},43:function(e,t,n){},44:function(e,t){if(!n)var n={map:function(e,t){var n={};return t?e.map((function(e,r){return n.index=r,t.call(n,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var n={};return e.reduce(t?function(e,r,a){return n.index=a,e+t.call(n,r)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?n.map(e,t):e)}};var r=function(){function e(e,t,n){return(e<<10)+(t<<5)+n}function t(e){var t=[],n=!1;function r(){t.sort(e),n=!0}return{push:function(e){t.push(e),n=!1},peek:function(e){return n||r(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return n||r(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return n||r(),t}}}function r(e,t,n,r,a,o,i){this.r1=e,this.r2=t,this.g1=n,this.g2=r,this.b1=a,this.b2=o,this.histo=i}function a(){this.vboxes=new t((function(e,t){return n.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function o(t,r){if(r.count()){var a=r.r2-r.r1+1,o=r.g2-r.g1+1,i=r.b2-r.b1+1,l=n.max([a,o,i]);if(1===r.count())return[r.copy()];var c,s,u,h,f=0,m=[],g=[];if(l===a)for(c=r.r1;c<=r.r2;c++){for(h=0,s=r.g1;s<=r.g2;s++)for(u=r.b1;u<=r.b2;u++)h+=t[e(c,s,u)]||0;f+=h,m[c]=f}else if(l===o)for(c=r.g1;c<=r.g2;c++){for(h=0,s=r.r1;s<=r.r2;s++)for(u=r.b1;u<=r.b2;u++)h+=t[e(s,c,u)]||0;f+=h,m[c]=f}else for(c=r.b1;c<=r.b2;c++){for(h=0,s=r.r1;s<=r.r2;s++)for(u=r.g1;u<=r.g2;u++)h+=t[e(s,u,c)]||0;f+=h,m[c]=f}return m.forEach((function(e,t){g[t]=f-e})),p(l===a?"r":l===o?"g":"b")}function p(e){var t,n,a,o,i,l=e+"1",s=e+"2",u=0;for(c=r[l];c<=r[s];c++)if(m[c]>f/2){for(a=r.copy(),o=r.copy(),i=(t=c-r[l])<=(n=r[s]-c)?Math.min(r[s]-1,~~(c+n/2)):Math.max(r[l],~~(c-1-t/2));!m[i];)i++;for(u=g[i];!u&&m[i-1];)u=g[--i];return a[s]=i,o[l]=a[s]+1,[a,o]}}}return r.prototype={volume:function(e){return this._volume&&!e||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(t){var n=this.histo;if(!this._count_set||t){var r,a,o,i=0;for(r=this.r1;r<=this.r2;r++)for(a=this.g1;a<=this.g2;a++)for(o=this.b1;o<=this.b2;o++)i+=n[e(r,a,o)]||0;this._count=i,this._count_set=!0}return this._count},copy:function(){return new r(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(t){var n=this.histo;if(!this._avg||t){var r,a,o,i,l=0,c=0,s=0,u=0;for(a=this.r1;a<=this.r2;a++)for(o=this.g1;o<=this.g2;o++)for(i=this.b1;i<=this.b2;i++)l+=r=n[e(a,o,i)]||0,c+=r*(a+.5)*8,s+=r*(o+.5)*8,u+=r*(i+.5)*8;this._avg=l?[~~(c/l),~~(s/l),~~(u/l)]:[~~(8*(this.r1+this.r2+1)/2),~~(8*(this.g1+this.g2+1)/2),~~(8*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(e){var t=e[0]>>3,n=e[1]>>3,r=e[2]>>3;return t>=this.r1&&t<=this.r2&&n>=this.g1&&n<=this.g2&&r>=this.b1&&r<=this.b2}},a.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,r,a=this.vboxes,o=0;o<a.size();o++)((n=Math.sqrt(Math.pow(e[0]-a.peek(o).color[0],2)+Math.pow(e[1]-a.peek(o).color[1],2)+Math.pow(e[2]-a.peek(o).color[2],2)))<t||void 0===t)&&(t=n,r=a.peek(o).color);return r},forcebw:function(){var e=this.vboxes;e.sort((function(e,t){return n.naturalOrder(n.sum(e.color),n.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var r=e.length-1,a=e[r].color;a[0]>251&&a[1]>251&&a[2]>251&&(e[r].color=[255,255,255])}},{quantize:function(i,l){if(!i.length||l<2||l>256)return!1;var c=function(t){var n,r,a,o,i=new Array(32768);return t.forEach((function(t){r=t[0]>>3,a=t[1]>>3,o=t[2]>>3,n=e(r,a,o),i[n]=(i[n]||0)+1})),i}(i);c.forEach((function(){}));var s=function(e,t){var n,a,o,i=1e6,l=0,c=1e6,s=0,u=1e6,h=0;return e.forEach((function(e){n=e[0]>>3,a=e[1]>>3,o=e[2]>>3,i=Math.min(i,n),l=Math.max(l,n),c=Math.min(c,a),s=Math.max(s,a),u=Math.min(u,o),h=Math.max(h,o)})),new r(i,l,c,s,u,h,t)}(i,c),u=new t((function(e,t){return n.naturalOrder(e.count(),t.count())}));function h(e,t){for(var n,r=e.size(),a=0;a<1e3;){if(r>=t)return;if(a++>1e3)return;if((n=e.pop()).count()){var i=o(c,n),l=i[0],s=i[1];if(!l)return;e.push(l),s&&(e.push(s),r++)}else e.push(n),a++}}u.push(s),h(u,.75*l);for(var f=new t((function(e,t){return n.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));u.size();)f.push(u.pop());h(f,l);for(var m=new a;f.size();)m.push(f.pop());return m}}}().quantize;e.exports=r},45:function(e,t){e.exports={createPixelArray:function(e,t,n){for(var r,a,o,i,l,c=e,s=[],u=0;u<t;u+=n)a=c[(r=4*u)+0],o=c[r+1],i=c[r+2],("undefined"===typeof(l=c[r+3])||l>=125)&&(a>250&&o>250&&i>250||s.push([a,o,i]));return s},validateOptions:function(e){var t=e.colorCount,n=e.quality;if("undefined"!==typeof t&&Number.isInteger(t)){if(1===t)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");t=Math.max(t,2),t=Math.min(t,20)}else t=10;return"undefined"===typeof n||Number.isInteger(n)?n=10:n<1&&(n=10),{colorCount:t,quality:n}}}},46:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(22),i=n.n(o),l=(n(36),n(13)),c=n(10),s=n(1),u=n(2);function h(){var e=Object(s.a)(["\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  padding: 0.5rem 1rem;\n  display: flex;\n"]);return h=function(){return e},e}var f=u.a.nav(h());var m=function(){return a.a.createElement(f,{className:"nav"},a.a.createElement("div",{className:"nav-inner"},a.a.createElement("div",{className:"nav-items"}),a.a.createElement("div",{className:"nav-items nav-items-right"},a.a.createElement(l.b,{to:"/image-color-palette",className:"nav-item nav-link"},"Coloooor"),a.a.createElement(l.b,{to:"/image-color-palette/about",className:"nav-item nav-link"},"About"),a.a.createElement(l.b,{to:"https://github.com/LiebeG/image-color-palette",className:"nav-item nav-link"},"Github"))))},g=(n(43),n(9));var p=function(e){return a.a.createElement("div",{className:"title-area"},a.a.createElement("h1",null,e.title),a.a.createElement("div",{className:"article-content-meta"},a.a.createElement("div",{className:"author-area"},a.a.createElement("div",{className:"tag"},"Author"),a.a.createElement("a",{href:"#",className:"author-na"},e.author)),a.a.createElement("div",{className:"created-area"},a.a.createElement("div",{className:"tag"},"Created"),a.a.createElement("time",null,e.created)),a.a.createElement("div",{className:"created-area"},a.a.createElement("div",{className:"tag"},"Updated"),a.a.createElement("time",null,e.updated))))};var v=function(){return a.a.createElement("svg",{className:"box-icon",xmlns:"http://www.w3.org/2000/svg",width:"50",height:"43",viewBox:"0 0 50 43"},a.a.createElement("path",{d:"M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"}))},d=a.a.forwardRef((function(e,t){var n=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useState)(!1),l=Object(g.a)(i,2),c=l[0],s=l[1],u=Object(r.useState)(0),h=Object(g.a)(u,2),f=h[0],m=h[1],p=function(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){var e=new Image;e.src=this.result,e.onload=function(){t.current.src=this.src,s(!0),m(t.current.height)}}};return a.a.createElement("div",{className:"imgUploadBox"},a.a.createElement("div",{id:"drop-zone",ref:o,onDragEnter:function(e){e.preventDefault(),e.stopPropagation()},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),o.current.classList.add("is-dragover")},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),o.current.classList.remove("is-dragover")},onDrop:function(e){e.preventDefault();var t=e.dataTransfer.items;if(t&&!(t.length<1)){if(t.length>1)return window.alert("Please only drop one file");if("file"===t[0].kind&&t[0].type.match("^image/")){var n=t[0].getAsFile();p(n)}else window.alert("Please use a image file ;)");o.current.classList.remove("is-dragover")}},onClick:function(){n.current.click()},style:{height:f?f+"px":"350px"}},a.a.createElement("div",{className:"box-input"},a.a.createElement("input",{className:"input-img-upload",type:"file",id:"input",ref:n,onChange:function(){var e=n.current.files[0];return!!e&&(/image\//.test(e.type)?void p(e):(console.log("This file is not image, please upload an image file."),!1))}})),a.a.createElement("div",{className:"box-sample",style:c?{visibility:"hidden"}:{}},a.a.createElement(v,null),a.a.createElement("label",{className:"box-label"},"Drag one picture to this Drop Zone ...")),a.a.createElement("div",{className:c?"box-user box-user-active":"box-user"},a.a.createElement("img",{src:"/",alt:"",ref:t})),a.a.createElement("div",{className:"drag-overlay"})),a.a.createElement("style",{jsx:"true"},"\n          .imgUploadBox {\n            margin-bottom: 3rem;\n          }\n          #drop-zone {\n            width: 580px;\n            border: 1px solid black;\n            outline: 1px dashed #000;\n            outline-offset: -10px;\n            position: relative;\n            height: 350px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            margin: 20px auto;\n            -webkit-transition: outline-offset 0.15s ease-in-out,\n              background-color 0.15s linear;\n            transition: outline-offset 0.15s ease-in-out,\n              background-color 0.15s linear;\n          }\n          .box-icon {\n            width: 100%;\n            height: 80px;\n            fill: #7a7a8c;\n            display: block;\n            margin-bottom: 40px;\n          }\n          .box-label {\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            cursor: pointer;\n            display: block;\n            text-align: center;\n            overflow: hidden;\n          }\n          #drop-zone.is-dragover {\n            outline: 2px dashed #92b0b3;\n            outline-offset: 0px;\n            background-color: #fff;\n          }\n          .box-user {\n            position: absolute;\n            width: 100%;\n            top: 0;\n            z-index: 2;\n          }\n          .box-user img {\n            width: 580px;\n          }\n          .box-user-active {\n          }\n        "))}));function b(){var e=Object(s.a)(["\n  border: none;\n  padding: 0.625rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  background-color: rgb(0, 0, 0, 0.1);\n  &.reverse {\n    color: white;\n    background-color: #000;\n  }\n"]);return b=function(){return e},e}var y=u.a.button(b());var E=function(e){var t=e.onClick,n=e.children,r=e.color,o=e.reverse;return a.a.createElement(y,{className:o?"reverse":"",onClick:t,style:{backgroundColor:r}},n)};function w(){var e=Object(s.a)(["\n  display: inline-block;\n  background: #afafaf;\n  border-radius: 50%;\n  width: 3rem;\n  height: 3rem;\n  margin-right: 0.4rem;\n  box-shadow: 0 15px 30px 0 rgba(0, 0, 0, 0.11),\n    0 5px 15px 0 rgba(0, 0, 0, 0.08);\n  &.placeholder span {\n    height: 3rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: white;\n    font-size: 1.6rem;\n  }\n"]);return w=function(){return e},e}var k=u.a.div(w());var x=function(e){var t=e.color;return e.placeholder?a.a.createElement(k,{className:"placeholder"}," ",a.a.createElement("span",null,"P")," "):a.a.createElement(k,{className:"swatch",style:{backgroundColor:t}})};function M(){var e=Object(s.a)(["\n  display: flex;\n  .main-color {\n    flex: 0 1 16rem;\n    margin-right: 2rem;\n  }\n  .color-palette {\n  }\n  h3 {\n    margin-top: 0;\n  }\n"]);return M=function(){return e},e}var C=u.a.div(M());var O=function(e){var t=e.mainColor,n=e.palette;return a.a.createElement(C,null,a.a.createElement("div",{className:"main-color"},a.a.createElement("h3",null,"Main Color"),a.a.createElement("div",{className:"swatches"},0!==t.length?t.map((function(e,t){return a.a.createElement(x,{color:e,key:t})})):a.a.createElement(x,{placeholder:!0}))),a.a.createElement("div",{className:"color-palette"},a.a.createElement("h3",null,"Color Palette"),a.a.createElement("div",{className:"swatches"},0!==n.length?n.map((function(e,t){return a.a.createElement(x,{color:e,key:t})})):a.a.createElement(a.a.Fragment,null,a.a.createElement(x,{placeholder:!0}),a.a.createElement(x,{placeholder:!0}),a.a.createElement(x,{placeholder:!0})))))};function N(){var e=Object(s.a)(["\n  border: 1px dashed #000;\n  margin-top: 1.5rem;\n  margin-bottom: 2rem;\n  width: 100%;\n  white-space: pre-wrap;\n  padding: 1.5rem;\n  box-sizing: border-box;\n  line-height: 1.5;\n  overflow-x: auto;\n"]);return N=function(){return e},e}var j=u.a.div(N());var I=function(e){var t=e.children;return a.a.createElement(j,null,t)},_=n(27),S=n.n(_),T=n(20),z=n(6),P=n(7);function D(e){for(var t=e.width,n=e.height,r=[],a=0;a<n;a++)for(var o=0;o<t;o++){var i=4*(a*t+o);r.push({r:e.data[i],g:e.data[i+1],b:e.data[i+2]})}return r}function L(e){return"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")}var A=function(){function e(){Object(z.a)(this,e)}return Object(P.a)(e,[{key:"getSwatch",value:function(e){var t={colors:0,time:0},n=performance.now(),r=D(e),a=this.quantize(r),o=this.orderByLuminance(a),i=performance.now();return t.time=i-n,{mc:this.getMostVariantColor(o),palette:o.slice(1,9),info:t}}},{key:"getSwatchByCanvas",value:function(e){var t={colors:0,time:0},n=performance.now(),r=D(e.getContext("2d").getImageData(0,0,e.width,e.height)),a=this.quantize(r),o=this.orderByLuminance(a),i=performance.now();return t.time=i-n,{mc:this.getMostVariantColor(o),palette:o.slice(1,9),info:t}}},{key:"_findBiggestRange",value:function(e){var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;e.forEach((function(e){t=Math.min(t,e.r),n=Math.max(n,e.r),r=Math.min(r,e.g),a=Math.max(a,e.g),o=Math.min(o,e.b),i=Math.max(i,e.b)}));var l=n-t,c=a-r,s=i-o,u=Math.max(l,c,s);return u===l?"r":u===c?"g":"b"}},{key:"quantize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.DEFAULT_DEPTH;if(0===n&&console.log("Quantizing to ".concat(Math.pow(2,r)," buckets.")),n===r){var a=t.reduce((function(e,t){return e.r+=t.r,e.g+=t.g,e.b+=t.b,e}),{r:0,g:0,b:0});return a.r=Math.round(a.r/t.length),a.g=Math.round(a.g/t.length),a.b=Math.round(a.b/t.length),[a]}var o=this._findBiggestRange(t);t.sort((function(e,t){return e[o]-t[o]}));var i=t.length/2;return[].concat(Object(T.a)(this.quantize(t.slice(0,i),n+1,r)),Object(T.a)(this.quantize(t.slice(i+1),n+1,r)))}},{key:"orderByLuminance",value:function(e){var t=function(e){return.2126*e.r+.7152*e.g+.0722*e.b};return e.sort((function(e,n){return t(e)-t(n)}))}},{key:"getMostVariantColor",value:function(e){var t=0,n=Number.NEGATIVE_INFINITY;return e.map((function(e){return Math.max(e.r,e.g,e.b)-Math.min(e.r,e.g,e.b)})).forEach((function(e,r){e>n&&(t=r,n=e)})),e[t]}},{key:"lighten",value:function(e,t){var n=1+t/100;return this._adjustColor(e,n)}},{key:"darken",value:function(e,t){var n=1-t/100;return this._adjustColor(e,n)}},{key:"_clamp",value:function(e,t,n){return Math.min(n,Math.max(t,e))}},{key:"_adjustColor",value:function(e,t){return{r:this._clamp(Math.round(e.r*t),0,255),g:this._clamp(Math.round(e.g*t),0,255),b:this._clamp(Math.round(e.b*t),0,255)}}}],[{key:"DEFAULT_DEPTH",get:function(){return 4}}]),e}();function q(e,t,n){e/=255,t/=255,n/=255;var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),l=(o+i)/2;if(o===i)r=a=0;else{var c=o-i;switch(a=l>.5?c/(2-o-i):c/(o+i),o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r*=60}return[r,100*a,100*l]}function F(e,t,n){var r,a,o;if(e/=360,n/=100,0===(t/=100))r=a=o=n;else{var i=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=i(c,l,e+1/3),a=i(c,l,e),o=i(c,l,e-1/3)}return[Math.round(255*r),Math.round(255*a),Math.round(255*o)]}var B=function(){function e(){Object(z.a)(this,e)}return Object(P.a)(e,[{key:"censusColors",value:function(e,t,n){var r,a,o,i=+new Date,l={colors:0,time:0,kmeansIteration:0,kmeansTime:0,top5Count:0},c=e.height,s=e.width,u=[],h=[],f=0,m=c*s<36e4?1:2;console.log("pixel step",m);var g,p,v=Math.round(.1066*t*t-2.7463*t+17.2795);v=v<4?4:v,console.log("color step",v);for(var d=1;d<c-1;){for(var b=1;b<s-1;){var y=d*s*4+4*b;if((g=q(r=e.data[y],a=e.data[y+1],o=e.data[y+2]))[2]>97||g[2]>95&&g[1]<30)b+=m;else if(g[2]<3||g[2]<5&&g[1]<30)b+=m;else{f++,p=1e4*Math.floor(g[0]/10)+100*Math.floor(g[1]/5)+Math.floor(g[2]/5);var E=u.indexOf(p);E<0?(u.push(p),h.push({key:p,fre:1,r:r,g:a,b:o,h:g[0],s:g[1],l:g[2],category:-1})):h[E].fre++,b+=m}}d+=m}console.log("pixel_count: ",f),l.time=+new Date-i,l.colors=h.length,console.log("time for process all pixel: ",l.time),i=+new Date,h.sort((function(e,t){return t.fre-e.fre}));var w=h.length;console.log("before filter: ",w),h=h.filter((function(e){return!(e.fre<5-m&&w>400)})),console.log("after filter: ",h.length);var k=[h[0],h[1],h[2]],x=this.chooseSeedColors(h,t),M=this.kMC(h,x,100),C=M[0];C=C.map((function(e){return function(e){for(var t,n="#",r=0;r<e.length;r++)n+=(t=e[r].toString(16)).length<2?"0"+t:t;return n}(F(e.h,e.s,e.l))}));var O="rgba("+h[0].r+","+h[0].g+","+h[0].b+",0.62)";return l.kmeansTime=+new Date-i,l.kmeansIteration=M[1],console.log("time for K-means: ",l.kmeansTime),n instanceof Function&&n(O,C),{mc:k,palette:C,info:l}}},{key:"chooseSeedColors",value:function(e,t){for(var n,r=[],a=e.length,o=0;o<a;o++){n=r.length;var i=e[o];if(o){for(var l=0;l<n;l++){if(Math.abs(r[l].h-i.h)+Math.abs(r[l].s-i.s)+Math.abs(r[l].l-i.l)<45)break}if(l===n&&(i.category=r.length,r.push({h:i.h,s:i.s,l:i.l,category:i.category,fre:i.fre})),r.length>=t)break}else i.category=0,r.push({h:i.h,s:i.s,l:i.l,category:i.category,fre:i.fre})}return r}},{key:"kMC",value:function(e,t,n){for(var r=0;r++<n;){t=t.filter((function(e){return e}));for(var a=e.length,o=a/8^0,i=a%8;i--;)this.classifyColor(e[i],t);for(;o--;)this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t);a=e.length;for(var l=[],c=void 0;a--;)l[c=e[a].category]?l[c].fre_count+=e[a].fre:(l[c]={},l[c].h=0,l[c].s=0,l[c].l=0,l[c].fre_count=e[a].fre);for(a=e.length;a--;)l[c=e[a].category].h+=e[a].h*e[a].fre/l[c].fre_count,l[c].s+=e[a].s*e[a].fre/l[c].fre_count,l[c].l+=e[a].l*e[a].fre/l[c].fre_count;var s=l.every((function(e,n){return Math.abs(e.h-t[n].h)<.5&&Math.abs(e.s-t[n].s)<.5&&Math.abs(e.l-t[n].l)<.5}));if(t=l.map((function(e,t){return{h:e.h,s:e.s,l:e.l,category:t,fre:e.fre_count}})),s)break}return console.log("KMC iteration "+r),t.sort((function(e,t){var n=F(e.h,e.s,e.l);n=n[0]+n[1]+n[2];var r=F(t.h,t.s,t.l);return(r=r[0]+r[1]+r[2])-n})),[t,r]}},{key:"classifyColor",value:function(e,t){for(var n,r=t.length,a=1e4;r--;){var o=Math.abs(t[r].h-e.h)+Math.abs(t[r].s-e.s)+Math.abs(t[r].l-e.l);o<a&&(a=o,n=r)}e.category=n}}]),e}();function G(e,t,n){e/=255,t/=255,n/=255;var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),l=(o+i)/2;if(o===i)r=a=0;else{var c=o-i;switch(a=l>.5?c/(2-o-i):c/(o+i),o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r*=60}return[r,100*a,100*l]}var R=function(){function e(){Object(z.a)(this,e)}return Object(P.a)(e,[{key:"censusColors",value:function(e,t,n){var r,a,o,i,l,c=performance.now(),s={colors:0,time:0,kmeansIteration:0,kmeansTime:0,top5Count:0},u=e.height,h=e.width,f=[],m=[],g=0,p=u*h<36e4?1:2;console.log("pixel step",p);for(var v=1;v<u-1;){for(var d=1;d<h-1;){i=G(r=e.data[v*h*4+4*d],a=e.data[v*h*4+4*d+1],o=e.data[v*h*4+4*d+2]),g++,l=1e4*Math.floor(i[0]/10)+100*Math.floor(i[1]/5)+Math.floor(i[2]/5);var b=f.indexOf(l);b<0?(f.push(l),m.push({key:l,fre:1,r:r,g:a,b:o,h:i[0],s:i[1],l:i[2],category:-1})):m[b].fre++,d+=p}v+=p}console.log("pixel_count: ",g),s.time=performance.now()-c,s.colors=m.length,console.log("time for process all pixel: ",s.time),c=performance.now(),m.sort((function(e,t){return t.fre-e.fre}));var y=m.length;console.log("before filter: ",y),m=m.filter((function(e){return!(e.fre<5-p&&y>400)})),console.log("after filter: ",m.length);var E=[m[0],m[1],m[2]],w=this.chooseSeedColors(m,t),k=this.kMC(m,w,100),x=k[0];x=x.map((function(e){return function(e){for(var t,n="#",r=0;r<e.length;r++)n+=(t=e[r].toString(16)).length<2?"0"+t:t;return n}(function(e,t,n){var r,a,o;if(e/=360,n/=100,0===(t/=100))r=a=o=n;else{var i=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=i(c,l,e+1/3),a=i(c,l,e),o=i(c,l,e-1/3)}return[Math.round(255*r),Math.round(255*a),Math.round(255*o)]}(e.h,e.s,e.l))}));var M="rgba("+m[0].r+","+m[0].g+","+m[0].b+",0.62)";return s.kmeansTime=performance.now()-c,s.kmeansIteration=k[1],console.log("time for K-means: ",s.kmeansTime),n instanceof Function&&n(M,x),{mc:E,palette:x,info:s}}},{key:"chooseSeedColors",value:function(e,t){for(var n,r=[],a=e.length,o=0;o<a;o++){n=r.length;var i=e[o];if(o){for(var l=0;l<n;l++){if(Math.abs(r[l].h-i.h)+Math.abs(r[l].s-i.s)+Math.abs(r[l].l-i.l)<45)break}if(l===n&&(i.category=r.length,r.push({h:i.h,s:i.s,l:i.l,category:i.category,fre:i.fre})),r.length>=t)break}else i.category=0,r.push({h:i.h,s:i.s,l:i.l,category:i.category,fre:i.fre})}return r}},{key:"kMC",value:function(e,t,n){for(var r=0;r++<n;){t=t.filter((function(e){return e}));for(var a=e.length,o=a/8^0,i=a%8;i--;)this.classifyColor(e[i],t);for(;o--;)this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t),this.classifyColor(e[--a],t);a=e.length;for(var l=[],c=void 0;a--;)l[c=e[a].category]?l[c].fre_count+=e[a].fre:(l[c]={},l[c].h=0,l[c].s=0,l[c].l=0,l[c].fre_count=e[a].fre);for(a=e.length;a--;)l[c=e[a].category].h+=e[a].h*e[a].fre/l[c].fre_count,l[c].s+=e[a].s*e[a].fre/l[c].fre_count,l[c].l+=e[a].l*e[a].fre/l[c].fre_count;var s=l.every((function(e,n){return Math.abs(e.h-t[n].h)<.5&&Math.abs(e.s-t[n].s)<.5&&Math.abs(e.l-t[n].l)<.5}));if(t=l.map((function(e,t){return{h:e.h,s:e.s,l:e.l,category:t,fre:e.fre_count}})),s)break}return console.log("KMC iteration "+r),[t,r]}},{key:"classifyColor",value:function(e,t){for(var n,r=t.length,a=1e4;r--;){var o=Math.abs(t[r].h-e.h)+Math.abs(t[r].s-e.s)+Math.abs(t[r].l-e.l);o<a&&(a=o,n=r)}e.category=n}}]),e}(),V=function(){this.red=0,this.green=0,this.blue=0,this.isLeaf=!1,this.pixelCount=0,this.children=new Array(8).fill(null),this.next=null},U=function(){function e(){Object(z.a)(this,e),this.root=new V,this.leafNum=0,this.reducible=new Array(7).fill(null),this.colors={}}return Object(P.a)(e,[{key:"createNode",value:function(e,t,n){var r=new V;return 7===n?(r.isLeaf=!0,this.leafNum++):(r.next=this.reducible[n],this.reducible[n]=r),r}},{key:"addColor",value:function(e,t,n){if(e.isLeaf)e.pixelCount++,e.red+=t.r,e.green+=t.g,e.blue+=t.b;else{for(var r="",a=t.r.toString(2),o=t.g.toString(2),i=t.b.toString(2);a.length<8;)a="0"+a;for(;o.length<8;)o="0"+o;for(;i.length<8;)i="0"+i;r+=a[n],r+=o[n],r+=i[n];var l=parseInt(r,2);null===e.children[l]&&(e.children[l]=this.createNode(e,l,n+1)),this.addColor(e.children[l],t,n+1)}}},{key:"reduceTree",value:function(){for(var e=6;null===this.reducible[e];)e--;var t=this.reducible[e];this.reducible[e]=t.next;for(var n=0,r=0,a=0,o=0,i=0;i<8;i++)null!==t.children[i]&&(n+=t.children[i].red,r+=t.children[i].green,a+=t.children[i].blue,o+=t.children[i].pixelCount,this.leafNum--);t.isLeaf=!0,t.red=n,t.green=r,t.blue=a,t.pixelCount=o,this.leafNum++}},{key:"buildOctree",value:function(e,t){for(var n=0;n<e.length;n++)for(this.addColor(this.root,e[n],0);this.leafNum>t;)this.reduceTree()}},{key:"getSwatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n={time:0},r=performance.now(),a=this._convertPixelsToRGB(e);this.buildOctree(a,t),this.colorsStats(this.root);var o=[];for(var i in this.colors)o.push({color:i,count:this.colors[i]});o.sort((function(e,t){return t.count-e.count}));var l=performance.now();return n.time=l-r,{mc:o[0].color,palette:o.slice(1).map((function(e){return e.color})),info:n}}},{key:"_convertPixelsToRGBModified",value:function(e,t){var n=e.width,r=e.height;t||(t=n*r<36e4?1:2);for(var a,o,i,l=[],c=[],s=0;s<r-1;s+=t)for(var u=0;u<n-1;u+=t){var h=4*(s*n+u);a=e.data[h],o=e.data[h+1],i=e.data[h+2];var f=this._getColorIndex(a>>3,o>>3,i>>3),m=l.indexOf(f);m<0?(l.push(f),c.push({r:a,g:o,b:i,key:f,count:1})):c[m].count++}return c}},{key:"_convertPixelsToRGB",value:function(e,t){var n=e.width,r=e.height;t||(t=n*r<36e4?1:2);for(var a=[],o=0;o<r;o+=t)for(var i=0;i<n;i+=t){var l=4*(o*n+i);a.push({r:e.data[l],g:e.data[l+1],b:e.data[l+2]})}return a}},{key:"_getColorIndex",value:function(e,t,n){return(e<<10)+(t<<5)+n}},{key:"colorsStats",value:function(e){if(e.isLeaf){var t=parseInt(e.red/e.pixelCount).toString(16),n=parseInt(e.green/e.pixelCount).toString(16),r=parseInt(e.blue/e.pixelCount).toString(16);1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),1===r.length&&(r="0"+r);var a="#"+t+n+r;this.colors[a]?this.colors[a]+=e.pixelCount:this.colors[a]=e.pixelCount}else for(var o=0;o<8;o++)null!==e.children[o]&&this.colorsStats(e.children[o])}}]),e}(),H=n(28);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(H.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(){this.children=[],this.count=0};function Q(e){for(var t=Math.floor(e.length/2);t>=0;t--)X(e,t,e.length);return e}function X(e,t,n){var r=2*t+1,a=2*t+2,o=t;if(r<n&&e[r].count<e[o].count&&(o=r),a<n&&e[a].count<e[o].count&&(o=a),o!==t){var i=[e[o],e[t]];e[t]=i[0],e[o]=i[1],X(e,o,n)}}var J=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;Object(z.a)(this,e),this.redLevel=t,this.greenLevel=n,this.blueLevel=r,this.bucket={}}return Object(P.a)(e,[{key:"getSwatchOptimized",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={colors:0,time:0},r=performance.now(),a=D(e);this.categorize(a);var o=this.quantizeWithMinHeap(t),i=performance.now();return n.time=i-r,{mc:o[0],palette:o.slice(1),info:n}}},{key:"getSwatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={colors:0,time:0},r=performance.now(),a=D(e);this.categorize(a);var o=this.quantizeWithoutMinHeap(t),i=performance.now();return n.time=i-r,{mc:o[0],palette:o.slice(1),info:n}}},{key:"categorize",value:function(e){for(var t=0;t<e.length;t++){var n=256/this.redLevel,r=256/this.greenLevel,a=256/this.blueLevel,o=Math.floor(e[t].r/n),i=Math.floor(e[t].g/r),l=Math.floor(e[t].b/a),c=String(o)+String(i)+String(l);this.bucket[c]||(this.bucket[c]=new W),this.bucket[c].children.push(e[t]),this.bucket[c].count++}return this.bucket}},{key:"quantizeWithoutMinHeap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[];for(var n in this.bucket)t.push(K({index:n},this.bucket[n]));t.sort((function(e,t){return t.count-e.count})),t.length>e&&(t=t.slice(0,e));var r=t.map((function(e){var t=e.children.reduce((function(e,t){return e.r+=t.r,e.g+=t.g,e.b+=t.b,e}),{r:0,g:0,b:0});return t.r=Math.round(t.r/e.count),t.g=Math.round(t.g/e.count),t.b=Math.round(t.b/e.count),t}));return r}},{key:"quantizeWithMinHeap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[];for(var n in this.bucket)t.length<e?(t.push(K({index:n},this.bucket[n])),Q(t)):this.bucket[n].count>t[0].count&&(t[0]=this.bucket[n],X(t,0,t.length));t.sort((function(e,t){return t.count-e.count}));var r=t.map((function(e){var t=e.children.reduce((function(e,t){return e.r+=t.r,e.g+=t.g,e.b+=t.b,e}),{r:0,g:0,b:0});return t.r=Math.round(t.r/e.count),t.g=Math.round(t.g/e.count),t.b=Math.round(t.b/e.count),t}));return r}}]),e}();function Z(){var e=Object(s.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n  margin: 2rem 0;\n"]);return Z=function(){return e},e}function $(){var e=Object(s.a)(["\n  font-style: italic;\n  color: #05f;\n  :hover {\n    color: blue;\n  }\n"]);return $=function(){return e},e}function ee(){var e=Object(s.a)(["\n  margin-left: auto;\n  margin-right: auto;\n  max-width: 62rem;\n"]);return ee=function(){return e},e}var te=u.a.div(ee()),ne=u.a.a($()),re=u.a.div(Z());var ae=function(){var e=Object(r.useRef)(null);function t(t){if(!t)try{t=function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=t.width=e.width,a=t.height=e.height;return n.drawImage(e,0,0,r,a),n.getImageData(0,0,r,a)}(e.current)}catch(n){window.alert("Please upload an image.")}return t}var n=Object(r.useState)({mc:[],palette:[],info:{}}),o=Object(g.a)(n,2),i=o[0],l=o[1],c=Object(r.useState)({mc:[],palette:[],info:{}}),s=Object(g.a)(c,2),u=s[0],h=s[1],f=Object(r.useState)({mc:[],palette:[],info:{}}),m=Object(g.a)(f,2),v=m[0],b=m[1],y=Object(r.useState)({mc:[],palette:[],info:{}}),w=Object(g.a)(y,2),k=w[0],x=w[1],M=Object(r.useState)({mc:[],palette:[],info:{}}),C=Object(g.a)(M,2),N=C[0],j=C[1],_=Object(r.useState)({mc:[],palette:[],info:{}}),T=Object(g.a)(_,2),z=T[0],P=T[1],D=function(e){if(e=t(e)){var n=new J,r=n.getSwatch(e,8),a=n.getSwatchOptimized(e,8),o=[L(r.mc)],i=r.palette.map((function(e){return L(e)})),c=[{time:r.info.time,desp:"without MinHeap"},{time:a.info.time,desp:"with MinHeap"}];l({mc:o,palette:i,info:c})}},q=function(e){if(e=t(e)){var n=(new B).censusColors(e,8),r=n.mc.map((function(e){return L(e)})),a=n.palette,o=n.info;h({mc:r,palette:a,info:o})}},F=function(e){if(e=t(e)){var n=(new R).censusColors(e,8),r=n.mc.map((function(e){return L(e)})),a=n.palette,o=n.info;b({mc:r,palette:a,info:o})}},G=function(e){if(e=t(e)){var n=(new S.a).getSwatch(e),r=["rgb(".concat(n.mc.join(","),")")],a=n.palette.map((function(e){return"rgb(".concat(e.join(","),")")})),o=n.info;x({mc:r,palette:a,info:o})}},V=function(e){if(e=t(e)){var n=(new A).getSwatch(e),r=[L(n.mc)],a=n.palette.map((function(e){return L(e)})),o=n.info;j({mc:r,palette:a,info:o})}},H=function(e){if(e=t(e)){var n=(new U).getSwatch(e,10),r=[n.mc],a=n.palette,o=n.info;P({mc:r,palette:a,info:o})}};return a.a.createElement(te,null,a.a.createElement(p,{title:"Many Methods To Get Color Palette of An Image",author:"Echo Yang",created:"Dec 01, 2019",updated:"Dec 26, 2019"}),a.a.createElement(d,{ref:e}),a.a.createElement(re,null,a.a.createElement(E,{onClick:function(e){var n=t();if(n)try{D(n),q(n),V(n),G(n),F(n),H(n)}catch(r){window.alert("There is something wrong in caculating, please try again later.")}},reverse:"true"},"Try All Pickers"),a.a.createElement(E,{onClick:function(){return D()}},"Uniform"),a.a.createElement(E,{onClick:function(){return q()}},"K Means Cluster"),a.a.createElement(E,{onClick:function(){return F()}},"Modified K Means Cluster"),a.a.createElement(E,{onClick:function(){return V()}},"Median Cut"),a.a.createElement(E,{onClick:function(){return G()}},"Modified Median Cut"),a.a.createElement(E,{onClick:function(){return H()}},"Octree")),a.a.createElement("div",{className:"picker"},a.a.createElement("h2",null,"# Method: Uniform/One-pass Quantization"),a.a.createElement("p",null,"Simple implementation by Echo Yang"),a.a.createElement(O,{mainColor:i.mc,palette:i.palette}),a.a.createElement(I,null,"Process time:"," ",i.info.length>0?"".concat(i.info[0].time," ms (").concat(i.info[0].desp,"), ").concat(i.info[1].time," ms (").concat(i.info[1].desp,")"):0)),a.a.createElement("div",{className:"picker"},a.a.createElement("h2",null,"# Method: K Means Cluster"),a.a.createElement("p",null,"From"," ",a.a.createElement(ne,{className:"link",href:"https://github.com/woshizja/colorful-color"},"Colorful Color")," ","by woshizja"),a.a.createElement(O,{mainColor:u.mc,palette:u.palette}),a.a.createElement(I,null,"Process time: ",u.info.time?u.info.time:0,"ms")),a.a.createElement("div",{className:"picker"},a.a.createElement("h2",null,"# Method: Modified K Means Cluster"),a.a.createElement("p",null,"Modification is based on"," ",a.a.createElement(ne,{className:"link",href:"https://github.com/woshizja/colorful-color"},"Colorful Color")," ","by Echo"),a.a.createElement(O,{mainColor:v.mc,palette:v.palette}),a.a.createElement(I,null,"Process time: ",v.info.time?v.info.time:0,"ms")),a.a.createElement("div",{className:"picker"},a.a.createElement("h2",null,"# Method: Median Cut"),a.a.createElement("p",null,"From"," ",a.a.createElement(ne,{className:"link",href:"https://github.com/GoogleChromeLabs/sample-media-pwa"},"Sample Media (VOD) App")," ","by GoogleChromeLabs"),a.a.createElement(O,{mainColor:N.mc,palette:N.palette}),a.a.createElement(I,null,"Process time: ",N.info.time?N.info.time:0,"ms")),a.a.createElement("div",{className:"picker"},a.a.createElement("h2",null,"# Method: Modified Median Cut"),a.a.createElement("p",null,"From"," ",a.a.createElement(ne,{className:"link",href:"https://github.com/lokesh/color-thief"},"Color Thief")," ","by ",a.a.createElement(ne,{href:"https://lokeshdhakar.com/"},"Lokesh Dhakar"),". Here is a"," ",a.a.createElement(ne,{href:"https://lokeshdhakar.com/projects/color-thief/"}," ","Demo Link")),a.a.createElement(O,{mainColor:k.mc,palette:k.palette}),a.a.createElement(I,null,"Process time: ",k.info.time?k.info.time:0,"ms")),a.a.createElement("div",{className:"picker"},a.a.createElement("h2",null,"# Method: Octree"),a.a.createElement("p",null,"From"," ",a.a.createElement(ne,{className:"link",href:"https://github.com/XadillaX/theme-color-test/blob/master/version3/octree.js"},"Octree \u4e3b\u9898\u8272\u63d0\u53d6")," ","by XadillaX"),a.a.createElement(O,{mainColor:z.mc,palette:z.palette}),a.a.createElement(I,null,"Process time: ",z.info.time?z.info.time:0,"ms")),a.a.createElement("style",{jsx:"true"},"\n          .picker {\n            margin-bottom: 3rem;\n          }\n        "))};function oe(){var e=Object(s.a)(["\n  line-height: 1.5rem;\n"]);return oe=function(){return e},e}function ie(){var e=Object(s.a)(["\n  text-align: center;\n  margin-top: 40px;\n  margin-bottom: 30px;\n"]);return ie=function(){return e},e}function le(){var e=Object(s.a)(["\n  margin: 0 20px;\n"]);return le=function(){return e},e}function ce(){var e=Object(s.a)(["\n  max-width: 870px;\n  margin: 0 auto;\n"]);return ce=function(){return e},e}var se=u.a.div(ce()),ue=(u.a.div(le()),u.a.h2(ie())),he=u.a.div(oe());var fe=function(e){return a.a.createElement(se,null,a.a.createElement(p,{title:"About This",author:"Echo Yang",created:"Dec 26, 2019",updated:"null"}),a.a.createElement(ue,null,"Introduction"),a.a.createElement(he,null,a.a.createElement("p",null,"There are three motivations behind this example. First, I am a colour-lover. Second, I am a science/tech/facts-lover. Third, I love to combine Technologies and Art."),a.a.createElement("p",null,"Even though there have been already hunderds of implementations on this topic, my examples here are based on these wonderful implementations and they are my approaches to learn about how to get main colors from a picture."),a.a.createElement("p",null,'"',a.a.createElement("u",null,"Get color palette from an image"),'" in scientific terminology, is called ',a.a.createElement("b",null,"Color Quantization"),". Color quantization is the process of reducing an image with thousands or millions of colors to one with fewer. The trick is to balance speed, cpu and memory requirements while minimizing the perceptual loss in output quality. (rosetta) More info can be found on wikipedia. Various algorithms can be found on rosettacode.org.")),a.a.createElement(ue,null,"One-pass Quantization"),a.a.createElement(he,null,a.a.createElement("p",null,"The most intuitive and simplest way is a fixed color partitioning. The term, one-pass quantization, is from Leptonica, some also call it"," ",a.a.createElement("b",null,"Uniform Quantization"),"."),a.a.createElement("p",null,"In my implemenation, I simply divide r/g/b color channels into larger segmentations (default is r8/g8/b4, means partition color space into 256 blocks). Then categorise every pixel into the blocks, finally sorting blocks by count, take the first several (maxColor) as result.")))};var me=function(){return a.a.createElement(l.a,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(m,null),a.a.createElement(c.c,null,a.a.createElement(c.a,{path:"/image-color-palette/about"},a.a.createElement(fe,null)),a.a.createElement(c.a,{path:"/image-color-palette"},a.a.createElement(ae,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.a80fa042.chunk.js.map